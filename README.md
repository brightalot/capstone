# capstone

## 📌 API 소개

이 프로젝트는 **Kakao i 오픈빌더**와 연동되는 **국내 주식 챗봇 백엔드**입니다.  
실시간 주가, 뉴스, 차트, 예측, 순위, 모의투자 주문 및 잔고 조회 기능을 제공합니다.

✅ **주요 기능**
- 주식 실시간 정보 조회 (가격, 차트, 뉴스 등)
- 종목별 뉴스 요약 제공
- 각종 주식 순위 (거래량, 시가총액, 등락률 등)
- **모의투자 기능 (주문 및 잔고 조회)** – *한국투자증권 OpenAPI 기반*
- 주가 예측
  
✅ **기술 스택**
- **Flask** 웹 프레임워크
- **Matplotlib** 차트 시각화
- **한국투자증권 OpenAPI** 활용  
- **Kakao i 오픈빌더 JSON 포맷** 응답 설계

---

### 📈 `/price` - 주가 정보 조회  
**기능:** 종목명과 가격 종류(현재가, 시가, 고가 등)를 기반으로 실시간 가격 정보를 제공합니다.  
**요청 방식:** `POST`  
**요청 파라미터:**  
- `kospi_stock_name`: 종목명  
- `price_type`: 가격 종류 (`현재가`, `시가`, `고가`, `저가`, `전일종가` 등)

---

### 📉 `/chart` - 주식 차트 이미지 제공  
**기능:** 종목의 일/주/월 단위 주가 데이터를 기반으로 차트 이미지를 생성하고 제공합니다.  
**요청 방식:** `POST`  
**요청 파라미터:**  
- `kospi_stock_name`: 종목명  
- `chart_type`: 차트 유형 (`일`, `주`, `월`)

---

### 📰 `/news` - 최신 금융 뉴스  
**기능:** 국내 최신 금융 뉴스(네이버 금융 기준)를 리스트 카드 형식으로 제공합니다.  
**요청 방식:** `POST`

---

### 📰 `/stock_news` - 개별 종목 뉴스  
**기능:** 사용자가 입력한 종목명을 기준으로 해당 기업 관련 뉴스를 조회합니다.  
**요청 방식:** `POST`

---

### 📊 `/volume-rank` - 거래량 순위  
**기능:** 거래량 기준 상위 5개 종목을 리스트 카드 형식으로 제공합니다.  
**요청 방식:** `POST`

---

### 💰 `/market-cap-rank` - 시가총액 순위  
**기능:** 시가총액 기준 상위 5개 종목 정보를 제공합니다.  
**요청 방식:** `POST`

---

### 🔺 `/price-change-rank` - 등락률 순위  
**기능:** 상승/하락률 기준 상위 5개 종목을 제공합니다.  
**요청 방식:** `POST`

---

### ⚡ `/volume-power-rank` - 체결강도 순위  
**기능:** 체결강도 기준 KOSPI/KOSDAQ 상위 5개 종목을 제공합니다.  
**요청 방식:** `POST`

---

### 🤖 `/mock_order_buy` - 모의 투자 주문 (매수/매도)  
**기능:** **한국투자증권 OpenAPI**를 통해 모의 투자 주문을 실행합니다.  
**요청 방식:** `POST`  
**요청 파라미터:**  
- `stock_name`: 종목명  
- `order_quantity`: 주문 수량  
- `order_command`: `매수` 또는 `매도`

---

### 📋 `/mock_inquire_balance` - 모의 계좌 잔고 조회  
**기능:** 모의투자 계좌의 현재 보유 종목, 총평가액, 손익 정보 등을 조회합니다.  
**요청 방식:** `POST`

---

### 🔮 `/predict_stock_price` - 주가 예측  
**기능:** 종목의 향후 고가/저가를 일/주/월 단위로 예측합니다.  
**요청 방식:** `POST`  
**요청 파라미터:**  
- `kospi_stock_name`: 종목명  
- `stock_chart_type`: `일`, `주`, `월`

---

##### 🧪 `/test` - 테스트용 응답  
**기능:** 사용자 입력을 그대로 반환하는 간단한 테스트 API입니다.  
**요청 방식:** `POST`

---

### ⚙️ 기타 참고사항
- 모든 응답은 **Kakao i 오픈빌더의 JSON 템플릿 형식**을 따릅니다.
- `.env` 파일에 API 키, 계좌번호, 폰트 경로 등 필요한 **환경변수**를 반드시 설정해야 합니다.
- 차트 이미지 생성 시 **한글 폰트 경로 (`FONT_PATH`)** 미설정 시 텍스트가 깨질 수 있습니다.
- 모의투자 기능은 **한국투자증권의 모의투자 OpenAPI**를 사용하며, 실제 투자와는 무관합니다.
